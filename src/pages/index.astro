---
import BaseLayout from "@layouts/BaseLayout.astro";
import BlogPostPreview from "@components/BlogPostPreview.astro";

let title = "Peter Morgan - Web Developer";
let description = "The perfect starter for your perfect blog.";

// Use Astro.glob to fetch all post with associated frontmatter
const unsortedPosts = await Astro.glob("../data/blog-posts/*.md");
const posts = unsortedPosts.sort(function (a, b) {
	return (
		new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf()
	);
});
const firstThreePosts = posts.slice(0,3);

---

<BaseLayout title={title} description={description}>
	<div class="container">
		<div class="row justify-content-center">
			<section aria-label="Blog post list" class="col-12 col-lg-8 col-xl-6">
				<h2 class="mb-5">Blog</h2>
				{firstThreePosts.map(({ frontmatter}) => (
					<BlogPostPreview
						title={frontmatter.title}
						description={frontmatter.description}
						publishDate={frontmatter.publishDate}
						url={frontmatter.slug}
					/>
				))}
			</section>
		</div>
		<div class="row justify-content-center">
			<div class="col-12 col-lg-8 col-xl-6">
				<h2 class="mb-3">Portfolio</h2>
				<h3><a href="https://SmartMusic.com">SmartMusic.com</a></h3>
				<ul>
					<li>
						Coded changes to page layouts and content, and created new pages to customize WordPress
						theme for client MakeMusic in Boulder, CO
					</li>
				</ul>
				<h3><a href="https://thedjpodcast.com">TheDJPodcast.com</a></h3>
				<ul class="mb-4">
					<li>Produced over 250 video tutorials on DJ'ing and music production for YouTube channel with
						over 25,000 subscribers and 4.7 million video views</li>
					<li>Developed WordPress theme with custom course catalog</li>
				</ul>
				<h3><a href="https://github.com/DFortun81/ATT-Classic">All the Things - Classic</a></h3>
				<ul class="mb-4">
					<li>Contribute to open source game addon for World of Warcraft: Classic</li>
					<li>Provide user support and project issue tracking</li>
				</ul>
				<h3>
					<a href="https://github.com/PeterMorganGH/143chars">143chars</a>
				</h3>
				<ul class="mb-4">
					<li>
						Built a Twitter-like website and REST API using Node.js/Express and MongoDB; front end
						website built with Pug templating engine
					</li>
				</ul>
				<h3>
					<a href="https://github.com/PeterMorganGH/water-meter">Water Meter</a>
				</h3>
				<ul class="mb-5">
					<li>Built prototype app for conceptual Internet of Things water meter with Vue.js, VueX, and Vue
						Router</li>
				</ul>
			</div>
		</div>
	</div>
</BaseLayout>

<style>

</style>
