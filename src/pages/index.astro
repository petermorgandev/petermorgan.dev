---
import BaseLayout from "@layouts/BaseLayout.astro";
import PostList from "@components/blog/PostList.astro";

const unsortedPosts = await Astro.glob("../data/blog-posts/*.md");
const posts = unsortedPosts.sort(function (a, b) {
	return (
		new Date(b.frontmatter.publishDate).valueOf() -
		new Date(a.frontmatter.publishDate).valueOf()
	);
});
const firstThreePosts = posts.slice(0, 3);
---

<BaseLayout>
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-12 col-lg-10 col-xl-8">
				<h1 class="mb-6r text-center">Peter Morgan</h1>
			</div>
			<div class="d-flex flex-column align-items-center col-12 col-lg-10 col-xl-8">
				<h2 class="fw-semibold fontsize-h1 mb-5">Blog</h2>
			</div>
			<section aria-label="Blog post list" class="col-12 col-lg-10 col-xl-8">
				{firstThreePosts.map((post) => <PostList data={post} />)}
			</section>
			<div class="col-12 col-lg-10 col-xl-8">
				<a href="/blog/" class="mt-5 mb-6r custombtn">View All Blog Posts</a>
			</div>
		</div>
	</div>
</BaseLayout>

<style lang="scss">
	h2 {
		box-shadow: inset 0 -0.5em 0 #868b9f;
		line-height: 1;
		padding-right: 1rem;
		padding-left: 1rem;
		text-align: center;
		text-transform: uppercase;
		width: max-content;
	}
</style>
